<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>5x5 Slot Machine</title>
<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #1e1e2f;
    color: #fff;
    padding: 2rem;
}

h1 {
    color: #ffcc00;
    margin-bottom: 1rem;
}

#balance {
    margin-bottom: 1rem;
    font-size: 1.2rem;
}

#slot-grid {
    display: grid;
    grid-template-columns: repeat(5, 80px);
    grid-template-rows: repeat(5, 80px);
    gap: 10px;
    justify-content: center;
    margin-bottom: 1.5rem;
}

.cell {
    background: #222;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
    border-radius: 8px;
    transition: transform 0.3s, background 0.3s;
}

.cell.win {
    background: gold;
    transform: scale(1.2);
}

#spin-btn {
    padding: 15px 30px;
    font-size: 1.2rem;
    background: #ffcc00;
    color: #1e1e2f;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: background 0.3s;
}

#spin-btn:hover {
    background: #ffd633;
}

#message {
    margin-top: 1rem;
    font-size: 1.2rem;
}

</style>
</head>
<body>

<h1>5x5 Slot Machine</h1>
<div id="balance">Balance: 100 Coins</div>
<div id="slot-grid"></div>
<button id="spin-btn">Spin</button>
<div id="message"></div>

<script>
const rows = 5;
const cols = 5;
const balanceEl = document.getElementById('balance');
const gridEl = document.getElementById('slot-grid');
const spinBtn = document.getElementById('spin-btn');
const messageEl = document.getElementById('message');

let balance = 100;
const spinCost = 1;

// Symbols with scoring per 3-in-line
const symbols = [
    {icon:'üçí', score:1},
    {icon:'üçã', score:1},
    {icon:'üçä', score:2},
    {icon:'‚≠ê', score:3},
    {icon:'7', score:5},
    {icon:'üîî', score:2},
    {icon:'üíé', score:4},
    {icon:'üçâ', score:2},
    {icon:'üçá', score:1},
    {icon:'üçÄ', score:3}
];

// 10 paylines (indices of grid cells)
const paylines = [
    [0,1,2,3,4], [5,6,7,8,9], [10,11,12,13,14],
    [15,16,17,18,19], [20,21,22,23,24],
    [0,6,12,18,24], [4,8,12,16,20],
    [0,5,10,15,20], [4,9,14,19,24],
    [2,7,12,17,22]
];

// Initialize grid
const grid = [];
for(let i=0;i<rows*cols;i++){
    const cell = document.createElement('div');
    cell.classList.add('cell');
    cell.textContent = '';
    gridEl.appendChild(cell);
    grid.push(cell);
}

// Animate spin
function animateSpin(symbolsArr) {
    return new Promise((resolve)=>{
        let spinCount = 0;
        const interval = setInterval(()=>{
            for(let i=0;i<grid.length;i++){
                const randomSymbol = symbols[Math.floor(Math.random()*symbols.length)].icon;
                grid[i].textContent = randomSymbol;
            }
            spinCount++;
            if(spinCount>15){
                clearInterval(interval);
                // Set final symbols
                for(let i=0;i<grid.length;i++){
                    grid[i].textContent = symbolsArr[i].icon;
                }
                resolve();
            }
        },50);
    });
}

// Spin function
async function spin() {
    if(balance < spinCost){
        messageEl.textContent = 'Not enough coins to spin!';
        return;
    }

    balance -= spinCost;
    balanceEl.textContent = `Balance: ${balance} Coins`;
    messageEl.textContent = '';
    
    // Generate random symbols for final result
    const finalSymbols = [];
    for(let i=0;i<rows*cols;i++){
        finalSymbols.push(symbols[Math.floor(Math.random()*symbols.length)]);
        grid[i].classList.remove('win');
    }

    // Animate reels
    await animateSpin(finalSymbols);

    // Check paylines
    let totalWin = 0;
    paylines.forEach(line=>{
        const lineSymbols = line.map(idx=>finalSymbols[idx]);
        // Count consecutive same symbols from left
        let matchCount = 1;
        for(let i=1;i<lineSymbols.length;i++){
            if(lineSymbols[i].icon === lineSymbols[0].icon){
                matchCount++;
            } else break;
        }
        if(matchCount>=3){
            const lineScore = lineSymbols[0].score * matchCount;
            totalWin += lineScore;
            // Highlight winning cells
            for(let i=0;i<matchCount;i++){
                grid[line[i]].classList.add('win');
            }
        }
    });

    if(totalWin>0){
        balance += totalWin;
        balanceEl.textContent = `Balance: ${balance} Coins`;
        messageEl.textContent = `üéâ You won ${totalWin} coins!`;
    } else {
        messageEl.textContent = 'üò¢ No win, try again!';
    }
}

spinBtn.addEventListener('click', spin);

</script>
</body>
</html>
