<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>5x5 Slot Machine</title>

<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #1e1e2f;
    color: #fff;
    padding: 2rem;
}

h1 {
    color: #ffcc00;
}

#balance {
    font-size: 1.2rem;
    margin-bottom: 1rem;
}

#slot-container {
    position: relative;
    display: inline-block;
}

#slot-grid {
    display: grid;
    grid-template-columns: repeat(5, 80px);
    grid-template-rows: repeat(5, 80px);
    gap: 10px;
}

.cell {
    background: #222;
    border-radius: 8px;
    font-size: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s, background 0.3s;
}

.cell.win {
    background: gold;
    transform: scale(1.2);
}

#spin-btn {
    margin-top: 1.5rem;
    padding: 15px 30px;
    font-size: 1.2rem;
    background: #ffcc00;
    border: none;
    border-radius: 10px;
    cursor: pointer;
}

#message {
    margin-top: 1rem;
    font-size: 1.2rem;
}

#payline-canvas {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
}

/* PAY TABLE */
#pay-table {
    margin-top: 60px;
    background: #2b2b3d;
    padding: 20px;
    border-radius: 10px;
    max-width: 650px;
    margin-left: auto;
    margin-right: auto;
}

#pay-table h2 {
    color: #ffcc00;
}

#pay-table table {
    width: 100%;
    border-collapse: collapse;
}

#pay-table th, #pay-table td {
    border: 1px solid #555;
    padding: 8px;
}

#pay-table th {
    background: #444;
}

.payline-box {
    background: #333;
    padding: 6px;
    border-radius: 6px;
    margin: 5px 0;
}

.payline-box.win {
    background: #ffcc00;
    color: #1e1e2f;
}

.symbol-cell {
    font-size: 1.4rem;
}

.symbol-cell.win {
    background: gold;
    border-radius: 4px;
}
</style>
</head>

<body>

<h1>5x5 Slot Machine</h1>
<div id="balance">Balance: 100 Coins</div>

<div id="slot-container">
    <div id="slot-grid"></div>
    <canvas id="payline-canvas" width="450" height="450"></canvas>
</div>

<button id="spin-btn">Spin</button>
<div id="message"></div>

<!-- PAY TABLE -->
<div id="pay-table">
    <h2>Pay Table</h2>

    <table id="symbols-table">
        <tr>
            <th>Symbol</th>
            <th>Value</th>
            <th>3 Hit</th>
            <th>4 Hit</th>
            <th>5 Hit</th>
        </tr>
    </table>

    <h3 style="margin-top:20px;">Paylines</h3>
    <div id="paylines-list"></div>
</div>

<script>
const rows = 5;
const cols = 5;
const gridEl = document.getElementById('slot-grid');
const balanceEl = document.getElementById('balance');
const messageEl = document.getElementById('message');
const spinBtn = document.getElementById('spin-btn');
const paylineCanvas = document.getElementById('payline-canvas');

let balance = 100;
const spinCost = 1;
let paylineInterval;

// SYMBOLS
const symbols = [
    {icon:'üçí', value:1},
    {icon:'üçã', value:1},
    {icon:'üçä', value:2},
    {icon:'üîî', value:2},
    {icon:'‚≠ê', value:3},
    {icon:'üçÄ', value:3},
    {icon:'üíé', value:4},
    {icon:'7', value:5}
];

// PAYLINES
const paylines = [
    [0,1,2,3,4],
    [5,6,7,8,9],
    [10,11,12,13,14],
    [15,16,17,18,19],
    [20,21,22,23,24],
    [0,6,12,18,24],
    [20,16,12,8,4],
    [0,6,12,8,4],
    [20,16,12,18,24]
];

// GRID INIT
const grid = [];
for(let i=0;i<rows*cols;i++){
    const cell = document.createElement('div');
    cell.className = 'cell';
    grid.push(cell);
    gridEl.appendChild(cell);
}

// PAY TABLE SYMBOLS
const symbolsTable = document.getElementById('symbols-table');
symbols.forEach(s=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
        <td class="symbol-cell">${s.icon}</td>
        <td>${s.value}</td>
        <td>${s.value*3}</td>
        <td>${s.value*4*2}</td>
        <td>${s.value*5*5}</td>
    `;
    symbolsTable.appendChild(tr);
});

// PAYLINES LIST
const paylinesList = document.getElementById('paylines-list');
const paylineBoxes = [];
paylines.forEach((p,i)=>{
    const div = document.createElement('div');
    div.className = 'payline-box';
    div.textContent = `Line ${i+1}: ${p.join(' ‚Üí ')}`;
    paylinesList.appendChild(div);
    paylineBoxes.push(div);
});

// SPIN ANIMATION
function animateSpin(finalSymbols){
    return new Promise(resolve=>{
        let frames = 0;
        const interval = setInterval(()=>{
            grid.forEach(cell=>{
                cell.textContent = symbols[Math.floor(Math.random()*symbols.length)].icon;
            });
            frames++;
            if(frames>20){
                clearInterval(interval);
                finalSymbols.forEach((s,i)=>grid[i].textContent=s.icon);
                resolve();
            }
        },50);
    });
}

// PAYLINE DRAW
function drawPayline(line){
    const ctx = paylineCanvas.getContext('2d');
    ctx.clearRect(0,0,450,450);
    ctx.strokeStyle = 'red';
    ctx.lineWidth = 4;
    ctx.beginPath();
    line.forEach((idx,i)=>{
        const cell = grid[idx];
        const x = cell.offsetLeft + 40;
        const y = cell.offsetTop + 40;
        if(i===0) ctx.moveTo(x,y);
        else ctx.lineTo(x,y);
    });
    ctx.stroke();
}

function animateWinningLines(lines){
    if(lines.length===0) return;
    let i=0;
    paylineInterval = setInterval(()=>{
        drawPayline(lines[i]);
        i = (i+1)%lines.length;
    },1000);
}

// SPIN LOGIC
async function spin(){
    if(balance < spinCost) return;

    balance -= spinCost;
    balanceEl.textContent = `Balance: ${balance} Coins`;
    messageEl.textContent = '';
    grid.forEach(c=>c.classList.remove('win'));
    paylineBoxes.forEach(b=>b.classList.remove('win'));
    paylineCanvas.getContext('2d').clearRect(0,0,450,450);

    const finalSymbols = Array.from({length:25},()=>symbols[Math.floor(Math.random()*symbols.length)]);
    await animateSpin(finalSymbols);

    let totalWin = 0;
    const winningLines = [];

    paylines.forEach((line,idx)=>{
        const icons = line.map(i=>finalSymbols[i]);
        let match = 1;
        for(let i=1;i<icons.length;i++){
            if(icons[i].icon===icons[0].icon) match++;
            else break;
        }

        if(match>=3){
            const sum = icons.slice(0,match).reduce((a,b)=>a+b.value,0);
            const multiplier = match===3?1:match===4?2:5;
            totalWin += sum * multiplier;
            winningLines.push(line);
            for(let i=0;i<match;i++) grid[line[i]].classList.add('win');
            paylineBoxes[idx].classList.add('win');
        }
    });

    if(totalWin>0){
        balance += totalWin;
        balanceEl.textContent = `Balance: ${balance} Coins`;
        messageEl.textContent = `üéâ You won ${totalWin} coins!`;
        animateWinningLines(winningLines);
    } else {
        messageEl.textContent = 'üò¢ No win';
    }
}

spinBtn.addEventListener('click', spin);
</script>

</body>
</html>
